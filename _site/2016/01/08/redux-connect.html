<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Connecting to the Redux Store</title>
  <meta name="description" content="Adam Tew
">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://adamtew.com//2016/01/08/redux-connect.html">
	<!-- mathjax support for LaTex! -->
	<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-47753222-2', 'auto');
	  ga('send', 'pageview');

	</script>
</head>


  <body>

     <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Adam Tew</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Connecting to the Redux Store</h1>
    <p class="post-meta">Jan 8, 2016</p>
  </header>

  <article class="post-content">
    <p>In the world of <code>react.js</code>, it’s difficult to bring everything together. There’s just <em>too much stuff!</em>. Terminology for dozens of new ideas you need mentallymapped to code can almost give you an aneurysm. In order to take advantage of app-wide state management, you need to understand the <a href="https://facebook.github.io/flux/docs/overview.html">flux architechture</a>.</p>

<h2 id="overview">Overview</h2>

<p>Redux is an implementation of the flux architecture. It’s a really light dependency that offers a handful of methods which are used to make an application stateful. The <a href="http://rackt.org/redux/docs/introduction/index.html">docs</a> are a great resource for getting at the heart of redux.</p>

<p><em>Note: Because of terminology, I’m going to use the word <strong>store</strong> to describe the <strong>redux state</strong> because I don’t want there to be confusion with the local state of a component</em></p>

<p>In a nutshell, you have a <code>store</code> that houses data. This store would holds information you want to persist beyond changing routes, so stuff like username. This data sits inside the store until you need it. It’s important to note that <strong>you must explicity retreive this data if you want it</strong> via the <code>connect()</code> method.</p>

<h2 id="connect">connect()</h2>

<p>If the redux store were a river of data, flowing through your application, the connect function would be the water controller that routes the proverbial data into a given component. It changes a component from dumb to smart (more information on that <a href="https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0#.tcfx9ct67">here</a>).</p>

<p>By connecting a component to store data you are <em>subscribing</em> to that data. This means a couple of things:</p>

<ul>
  <li>That component will always have access to the current version of the given data</li>
  <li>When the given data is updated your component will rerender</li>
</ul>

<p><code>connect()</code> lets you subscribe to as many objects in the store as you need. The way you manage this is through the first parameter of connect, <code>mapStateToProps(state)</code>. There are other methods in connect, you can read about them <a href="https://github.com/rackt/react-redux/blob/master/docs/api.md">here</a></p>

<p><em>Note: Rarely, if ever, should you subscribe to the whole store on a given component because this can hurt perfomance</em></p>

<h2 id="mapstatetopropsstate">mapStateToProps(state)</h2>

<p><code>mapStateToProps</code> hooks into the river of redux data and maps a given object on the store to an object on the local <code>this.props</code>. The rest of redux needs to be setup already (reducers, actions, etc) but once that’s taken care of, you only need to call <code>connect</code> and pass <code>mapStateToProps</code> in as an argument to pull out redux data.</p>

<h2 id="examples">Examples</h2>

<p>Here are some examples</p>

<pre><code>
// This maps the entire state to a component
// something you don't normally want to do
mapStateToProps(state) {
  return {
    state
  }
}

export default connect(mapStateToProps)(MyComponent)
</code></pre>

<pre><code>// More ideal because you're only grabbing the object you need
mapStateToProps(state) {
  return {
    user: state.user
  }
}

export default connect(mapStateToProps)(MyComponent)
</code></pre>

<pre><code>// A little bit cleaner with the es6 lambda syntax
export default connect(
  (state) =&gt; ({
    user: state.user
  })
)(MyComponent)
</code></pre>

  </article>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">
    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1"></div>
      <div class="footer-col  footer-col-2"></div>
      <div class="footer-col  footer-col-3"></div>
    </div>

  </div>

</footer>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-47753222-2', 'auto');
  ga('send', 'pageview');

</script>

  </body>

</html>
